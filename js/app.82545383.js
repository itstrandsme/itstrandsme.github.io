(function(t){function e(e){for(var n,o,s=e[0],l=e[1],u=e[2],c=0,p=[];c<s.length;c++)o=s[c],i[o]&&p.push(i[o][0]),i[o]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);h&&h(e);while(p.length)p.shift()();return a.push.apply(a,u||[]),r()}function r(){for(var t,e=0;e<a.length;e++){for(var r=a[e],n=!0,s=1;s<r.length;s++){var l=r[s];0!==i[l]&&(n=!1)}n&&(a.splice(e--,1),t=o(o.s=r[0]))}return t}var n={},i={app:0},a=[];function o(e){if(n[e])return n[e].exports;var r=n[e]={i:e,l:!1,exports:{}};return t[e].call(r.exports,r,r.exports,o),r.l=!0,r.exports}o.m=t,o.c=n,o.d=function(t,e,r){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var h=l;a.push([0,"chunk-vendors"]),r()})({0:function(t,e,r){t.exports=r("56d7")},"56d7":function(t,e,r){"use strict";r.r(e);var n={};r.r(n),r.d(n,"getContext",function(){return b}),r.d(n,"createProgram",function(){return R}),r.d(n,"createShader",function(){return y}),r.d(n,"createTexture",function(){return S}),r.d(n,"createUniform",function(){return _}),r.d(n,"activeTexture",function(){return C}),r.d(n,"updateTexture",function(){return D}),r.d(n,"setRectangle",function(){return T});r("cadf"),r("551c"),r("f751"),r("097d");var i=r("2b0e"),a=r("ce5b"),o=r.n(a),s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",[r("v-content",[r("v-container",{attrs:{fluid:"",rain:""}},[r("Rain"),r("MainView")],1)],1)],1)},l=[],u=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("Countdown",{attrs:{end:"November 8, 2019"}})],1)},h=[],c=r("3f54"),p=r.n(c),d={name:"MainView",components:{Countdown:p.a}},g=d,f=r("2877"),m=Object(f["a"])(g,u,h,!1,null,null,null),x=m.exports,v=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},w=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticStyle:{position:"absolute"}},[r("div",{staticClass:"image-preload",staticStyle:{display:"none"}},[r("img",{attrs:{src:"img/drop-color.png",alt:""}}),r("img",{attrs:{src:"img/drop-alpha.png",alt:""}}),r("img",{attrs:{src:"img/weather/texture-rain-fg.png"}}),r("img",{attrs:{src:"img/weather/texture-rain-bg.png"}})]),r("div",[r("div",{staticClass:"slideshow"},[r("canvas",{staticStyle:{position:"absolute"},attrs:{width:"1",height:"1",id:"container"}}),r("div",{staticClass:"slide",attrs:{id:"slide-1","data-weather":"rain"}})]),r("p",{staticClass:"nosupport"},[t._v("Sorry, but your browser does not support WebGL!")])])])}];r("7f7f"),r("ac6a"),r("63d9");function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=["webgl","experimental-webgl"],n=null;return r.some(function(r){try{n=t.getContext(r,e)}catch(i){}return null!=n}),null==n&&document.body.classList.add("no-webgl"),n}function R(t,e,r){var n=y(t,e,t.VERTEX_SHADER),i=y(t,r,t.FRAGMENT_SHADER),a=t.createProgram();t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a);var o=t.getProgramParameter(a,t.LINK_STATUS);if(!o){var s=t.getProgramInfoLog(a);return A("Error in program linking: "+s),t.deleteProgram(a),null}var l=t.getAttribLocation(a,"a_position"),u=t.getAttribLocation(a,"a_texCoord"),h=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,h),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(u),t.vertexAttribPointer(u,2,t.FLOAT,!1,0,0);var c=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,c),t.enableVertexAttribArray(l),t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),a}function y(t,e,r){var n=t.createShader(r);t.shaderSource(n,e),t.compileShader(n);var i=t.getShaderParameter(n,t.COMPILE_STATUS);if(!i){var a=t.getShaderInfoLog(n);return A("Error compiling shader '"+n+"':"+a),t.deleteShader(n),null}return n}function S(t,e,r){var n=t.createTexture();return C(t,r),t.bindTexture(t.TEXTURE_2D,n),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),null==e?n:(D(t,e),n)}function _(t,e,r,n){for(var i=t.getUniformLocation(e,"u_"+n),a=arguments.length,o=new Array(a>4?a-4:0),s=4;s<a;s++)o[s-4]=arguments[s];t["uniform"+r].apply(t,[i].concat(o))}function C(t,e){t.activeTexture(t["TEXTURE"+e])}function D(t,e){t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}function T(t,e,r,n,i){var a=e,o=e+n,s=r,l=r+i;t.bufferData(t.ARRAY_BUFFER,new Float32Array([a,s,o,s,a,l,a,l,o,s,o,l]),t.STATIC_DRAW)}function A(t){console.error(t)}function F(t,e,r,n){this.init(t,e,r,n)}F.prototype={canvas:null,gl:null,program:null,width:0,height:0,init:function(t,e,r,n){this.canvas=t,this.width=t.width,this.height=t.height,this.gl=b(t,e),this.program=this.createProgram(r,n),this.useProgram(this.program)},createProgram:function(t,e){var r=R(this.gl,t,e);return r},useProgram:function(t){this.program=t,this.gl.useProgram(t)},createTexture:function(t,e){return S(this.gl,t,e)},createUniform:function(t,e){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];_.apply(n,[this.gl,this.program,t,e].concat(i))},activeTexture:function(t){C(this.gl,t)},updateTexture:function(t){D(this.gl,t)},draw:function(){T(this.gl,-1,-1,2,2),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}};var E=F;function P(t,e){var r=document.createElement("canvas");return r.width=t,r.height=e,r}function B(){this.init()}B.prototype={init:function(){},getVertexCode:function(){return"\nprecision mediump float;\n\nattribute vec2 a_position;\n\nvoid main() {\n   gl_Position = vec4(a_position,0.0,1.0);\n}\n"},getFragmentCode:function(){return'\nprecision mediump float;\n\n// textures\nuniform sampler2D u_waterMap;\nuniform sampler2D u_textureShine;\nuniform sampler2D u_textureFg;\nuniform sampler2D u_textureBg;\n\n// the texCoords passed in from the vertex shader.\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_parallax;\nuniform float u_parallaxFg;\nuniform float u_parallaxBg;\nuniform float u_textureRatio;\nuniform bool u_renderShine;\nuniform bool u_renderShadow;\nuniform float u_minRefraction;\nuniform float u_refractionDelta;\nuniform float u_brightness;\nuniform float u_alphaMultiply;\nuniform float u_alphaSubtract;\n\n// alpha-blends two colors\nvec4 blend(vec4 bg,vec4 fg){\n  vec3 bgm=bg.rgb*bg.a;\n  vec3 fgm=fg.rgb*fg.a;\n  float ia=1.0-fg.a;\n  float a=(fg.a + bg.a * ia);\n  vec3 rgb;\n  if(a!=0.0){\n    rgb=(fgm + bgm * ia) / a;\n  }else{\n    rgb=vec3(0.0,0.0,0.0);\n  }\n  return vec4(rgb,a);\n}\n\nvec2 pixel(){\n  return vec2(1.0,1.0)/u_resolution;\n}\n\nvec2 parallax(float v){\n  return u_parallax*pixel()*v;\n}\n\nvec2 texCoord(){\n  return vec2(gl_FragCoord.x, u_resolution.y-gl_FragCoord.y)/u_resolution;\n}\n\n// scales the bg up and proportionally to fill the container\nvec2 scaledTexCoord(){\n  float ratio=u_resolution.x/u_resolution.y;\n  vec2 scale=vec2(1.0,1.0);\n  vec2 offset=vec2(0.0,0.0);\n  float ratioDelta=ratio-u_textureRatio;\n  if(ratioDelta>=0.0){\n    scale.y=(1.0+ratioDelta);\n    offset.y=ratioDelta/2.0;\n  }else{\n    scale.x=(1.0-ratioDelta);\n    offset.x=-ratioDelta/2.0;\n  }\n  return (texCoord()+offset)/scale;\n}\n\n// get color from fg\nvec4 fgColor(float x, float y){\n  float p2=u_parallaxFg*2.0;\n  vec2 scale=vec2(\n    (u_resolution.x+p2)/u_resolution.x,\n    (u_resolution.y+p2)/u_resolution.y\n  );\n\n  vec2 scaledTexCoord=texCoord()/scale;\n  vec2 offset=vec2(\n    (1.0-(1.0/scale.x))/2.0,\n    (1.0-(1.0/scale.y))/2.0\n  );\n\n  return texture2D(u_waterMap,\n    (scaledTexCoord+offset)+(pixel()*vec2(x,y))+parallax(u_parallaxFg)\n  );\n}\n\nvoid main() {\n  vec4 bg=texture2D(u_textureBg,scaledTexCoord()+parallax(u_parallaxBg));\n\n  vec4 cur = fgColor(0.0,0.0);\n\n  float d=cur.b; // "thickness"\n  float x=cur.g;\n  float y=cur.r;\n\n  float a=clamp(cur.a*u_alphaMultiply-u_alphaSubtract, 0.0,1.0);\n\n  vec2 refraction = (vec2(x,y)-0.5)*2.0;\n  vec2 refractionParallax=parallax(u_parallaxBg-u_parallaxFg);\n  vec2 refractionPos = scaledTexCoord()\n    + (pixel()*refraction*(u_minRefraction+(d*u_refractionDelta)))\n    + refractionParallax;\n\n  vec4 tex=texture2D(u_textureFg,refractionPos);\n\n  if(u_renderShine){\n    float maxShine=490.0;\n    float minShine=maxShine*0.18;\n    vec2 shinePos=vec2(0.5,0.5) + ((1.0/512.0)*refraction)* -(minShine+((maxShine-minShine)*d));\n    vec4 shine=texture2D(u_textureShine,shinePos);\n    tex=blend(tex,shine);\n  }\n\n  vec4 fg=vec4(tex.rgb*u_brightness,a);\n\n  if(u_renderShadow){\n    float borderAlpha = fgColor(0.,0.-(d*6.0)).a;\n    borderAlpha=borderAlpha*u_alphaMultiply-(u_alphaSubtract+0.5);\n    borderAlpha=clamp(borderAlpha,0.,1.);\n    borderAlpha*=0.2;\n    vec4 border=vec4(0.,0.,0.,borderAlpha);\n    fg=blend(border,fg);\n  }\n\n  gl_FragColor = blend(bg,fg);\n}\n'}};var M=B,U=new M,O=r("e98f"),I=O(U.getVertexCode()),L=O(U.getFragmentCode()),X={renderShadow:!1,minRefraction:256,maxRefraction:512,brightness:1,alphaMultiply:20,alphaSubtract:5,parallaxBg:5,parallaxFg:20};function W(t,e,r,n){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.canvas=t,this.canvasLiquid=e,this.imageShine=i,this.imageFg=r,this.imageBg=n,this.options=Object.assign({},X,a),this.init()}W.prototype={canvas:null,gl:null,canvasLiquid:null,width:0,height:0,imageShine:"",imageFg:"",imageBg:"",textures:null,programWater:null,programBlurX:null,programBlurY:null,parallaxX:0,parallaxY:0,renderShadow:!1,options:null,init:function(){this.width=this.canvas.width,this.height=this.canvas.height,this.gl=new E(this.canvas,{alpha:!1},I,L);var t=this.gl;this.programWater=t.program,t.createUniform("2f","resolution",this.width,this.height),t.createUniform("1f","textureRatio",this.imageBg.width/this.imageBg.height),t.createUniform("1i","renderShine",null!=this.imageShine),t.createUniform("1i","renderShadow",this.options.renderShadow),t.createUniform("1f","minRefraction",this.options.minRefraction),t.createUniform("1f","refractionDelta",this.options.maxRefraction-this.options.minRefraction),t.createUniform("1f","brightness",this.options.brightness),t.createUniform("1f","alphaMultiply",this.options.alphaMultiply),t.createUniform("1f","alphaSubtract",this.options.alphaSubtract),t.createUniform("1f","parallaxBg",this.options.parallaxBg),t.createUniform("1f","parallaxFg",this.options.parallaxFg),t.createTexture(null,0),this.textures=[{name:"textureShine",img:null==this.imageShine?P(2,2):this.imageShine},{name:"textureFg",img:this.imageFg},{name:"textureBg",img:this.imageBg}],this.textures.forEach(function(e,r){t.createTexture(e.img,r+1),t.createUniform("1i",e.name,r+1)}),this.draw()},draw:function(){this.gl.useProgram(this.programWater),this.gl.createUniform("2f","parallax",this.parallaxX,this.parallaxY),this.updateTexture(),this.gl.draw(),requestAnimationFrame(this.draw.bind(this))},updateTextures:function(){var t=this;this.textures.forEach(function(e,r){t.gl.activeTexture(r+1),t.gl.updateTexture(e.img)})},updateTexture:function(){this.gl.activeTexture(0),this.gl.updateTexture(this.canvasLiquid)},resize:function(){},get overlayTexture(){},set overlayTexture(t){}};var j=W,k=(r("55dd"),r("75fc"));r("6c7b"),r("5df3");function G(t,e,r){return new Promise(function(n,i){"string"==typeof t&&(t={name:"image"+e,src:t});var a=new Image;t.img=a,a.addEventListener("load",function(i){"function"==typeof r&&r.call(null,a,e),n(t)}),a.src=t.src})}function z(t,e){return Promise.all(t.map(function(t,r){return G(t,r,e)}))}function Y(t,e){return new Promise(function(r,n){z(t,e).then(function(t){var e={};t.forEach(function(t){e[t.name]={img:t.img,src:t.src}}),r(e)})})}function q(t,e){for(var r=0;r<t;r++)e.call(this,r)}function N(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==t?(t=0,e=1):null!=t&&null==e&&(e=t,t=0);var n=e-t;return null==r&&(r=function(t){return t}),t+r(Math.random())*n}function V(t){return N()<=t}var $=64,H={x:0,y:0,r:0,spreadX:0,spreadY:0,momentum:0,momentumX:0,lastSpawn:0,nextSpawn:0,parent:null,isNew:!0,killed:!1,shrink:0},J={minR:10,maxR:40,maxDrops:900,rainChance:.3,rainLimit:3,dropletsRate:50,dropletsSize:[2,4],dropletsCleaningRadiusMultiplier:.43,raining:!0,globalTimeScale:1,trailRate:1,autoShrink:!0,spawnArea:[-.1,.95],trailScaleRange:[.2,.5],collisionRadius:.65,collisionRadiusIncrease:.01,dropFallMultiplier:1,collisionBoostMultiplier:.05,collisionBoost:1};function Q(t,e,r,n,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.width=t,this.height=e,this.scale=r,this.dropAlpha=n,this.dropColor=i,this.options=Object.assign({},J,a),this.init()}Q.prototype={dropColor:null,dropAlpha:null,canvas:null,ctx:null,width:0,height:0,scale:0,dropletsPixelDensity:1,droplets:null,dropletsCtx:null,dropletsCounter:0,drops:null,dropsGfx:null,clearDropletsGfx:null,textureCleaningIterations:0,lastRender:null,options:null,init:function(){this.canvas=P(this.width,this.height),this.ctx=this.canvas.getContext("2d"),this.droplets=P(this.width*this.dropletsPixelDensity,this.height*this.dropletsPixelDensity),this.dropletsCtx=this.droplets.getContext("2d"),this.drops=[],this.dropsGfx=[],this.renderDropsGfx(),this.update()},get deltaR(){return this.options.maxR-this.options.minR},get area(){return this.width*this.height/this.scale},get areaMultiplier(){return Math.sqrt(this.area/786432)},drawDroplet:function(t,e,r){this.drawDrop(this.dropletsCtx,Object.assign(Object.create(H),{x:t*this.dropletsPixelDensity,y:e*this.dropletsPixelDensity,r:r*this.dropletsPixelDensity}))},renderDropsGfx:function(){var t=this,e=P($,$),r=e.getContext("2d");this.dropsGfx=Array.apply(null,Array(255)).map(function(n,i){var a=P($,$),o=a.getContext("2d");return r.clearRect(0,0,$,$),r.globalCompositeOperation="source-over",r.drawImage(t.dropColor,0,0,$,$),r.globalCompositeOperation="screen",r.fillStyle="rgba(0,0,"+i+",1)",r.fillRect(0,0,$,$),o.globalCompositeOperation="source-over",o.drawImage(t.dropAlpha,0,0,$,$),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,$,$),a}),this.clearDropletsGfx=P(128,128);var n=this.clearDropletsGfx.getContext("2d");n.fillStyle="#000",n.beginPath(),n.arc(64,64,64,0,2*Math.PI),n.fill()},drawDrop:function(t,e){if(this.dropsGfx.length>0){var r=e.x,n=e.y,i=e.r,a=e.spreadX,o=e.spreadY,s=1,l=1.5,u=Math.max(0,Math.min(1,(i-this.options.minR)/this.deltaR*.9));u*=1/(.5*(e.spreadX+e.spreadY)+1),t.globalAlpha=1,t.globalCompositeOperation="source-over",u=Math.floor(u*(this.dropsGfx.length-1)),t.drawImage(this.dropsGfx[u],(r-i*s*(a+1))*this.scale,(n-i*l*(o+1))*this.scale,2*i*s*(a+1)*this.scale,2*i*l*(o+1)*this.scale)}},clearDroplets:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,n=this.dropletsCtx;n.globalCompositeOperation="destination-out",n.drawImage(this.clearDropletsGfx,(t-r)*this.dropletsPixelDensity*this.scale,(e-r)*this.dropletsPixelDensity*this.scale,2*r*this.dropletsPixelDensity*this.scale,2*r*this.dropletsPixelDensity*this.scale*1.5)},clearCanvas:function(){this.ctx.clearRect(0,0,this.width,this.height)},createDrop:function(t){return this.drops.length>=this.options.maxDrops*this.areaMultiplier?null:Object.assign(Object.create(H),t)},addDrop:function(t){return!(this.drops.length>=this.options.maxDrops*this.areaMultiplier||null==t)&&(this.drops.push(t),!0)},updateRain:function(t){var e=[];if(this.options.raining){var r=this.options.rainLimit*t*this.areaMultiplier,n=0;while(V(this.options.rainChance*t*this.areaMultiplier)&&n<r){n++;var i=N(this.options.minR,this.options.maxR,function(t){return Math.pow(t,3)}),a=this.createDrop({x:N(this.width/this.scale),y:N(this.height/this.scale*this.options.spawnArea[0],this.height/this.scale*this.options.spawnArea[1]),r:i,momentum:1+.1*(i-this.options.minR)+N(2),spreadX:1.5,spreadY:1.5});null!=a&&e.push(a)}}return e},clearDrops:function(){this.drops.forEach(function(t){setTimeout(function(){t.shrink=.1+N(.5)},N(1200))}),this.clearTexture()},clearTexture:function(){this.textureCleaningIterations=50},updateDroplets:function(t){var e=this;this.textureCleaningIterations>0&&(this.textureCleaningIterations-=1*t,this.dropletsCtx.globalCompositeOperation="destination-out",this.dropletsCtx.fillStyle="rgba(0,0,0,"+.05*t+")",this.dropletsCtx.fillRect(0,0,this.width*this.dropletsPixelDensity,this.height*this.dropletsPixelDensity)),this.options.raining&&(this.dropletsCounter+=this.options.dropletsRate*t*this.areaMultiplier,q(this.dropletsCounter,function(t){e.dropletsCounter--,e.drawDroplet(N(e.width/e.scale),N(e.height/e.scale),N.apply(void 0,Object(k["a"])(e.options.dropletsSize).concat([function(t){return t*t}])))})),this.ctx.drawImage(this.droplets,0,0,this.width,this.height)},updateDrops:function(t){var e=this,r=[];this.updateDroplets(t);var n=this.updateRain(t);r=r.concat(n),this.drops.sort(function(t,r){var n=t.y*(e.width/e.scale)+t.x,i=r.y*(e.width/e.scale)+r.x;return n>i?1:n==i?0:-1}),this.drops.forEach(function(e,n){var i=this;if(!e.killed){if(V((e.r-this.options.minR*this.options.dropFallMultiplier)*(.1/this.deltaR)*t)&&(e.momentum+=N(e.r/this.options.maxR*4)),this.options.autoShrink&&e.r<=this.options.minR&&V(.05*t)&&(e.shrink+=.01),e.r-=e.shrink*t,e.r<=0&&(e.killed=!0),this.options.raining&&(e.lastSpawn+=e.momentum*t*this.options.trailRate,e.lastSpawn>e.nextSpawn)){var a=this.createDrop({x:e.x+.1*N(-e.r,e.r),y:e.y-.01*e.r,r:e.r*N.apply(void 0,Object(k["a"])(this.options.trailScaleRange)),spreadY:.1*e.momentum,parent:e});null!=a&&(r.push(a),e.r*=Math.pow(.97,t),e.lastSpawn=0,e.nextSpawn=N(this.options.minR,this.options.maxR)-2*e.momentum*this.options.trailRate+(this.options.maxR-e.r))}e.spreadX*=Math.pow(.4,t),e.spreadY*=Math.pow(.7,t);var o=e.momentum>0;o&&!e.killed&&(e.y+=e.momentum*this.options.globalTimeScale,e.x+=e.momentumX*this.options.globalTimeScale,e.y>this.height/this.scale+e.r&&(e.killed=!0));var s=(o||e.isNew)&&!e.killed;e.isNew=!1,s&&this.drops.slice(n+1,n+70).forEach(function(r){if(e!=r&&e.r>r.r&&e.parent!=r&&r.parent!=e&&!r.killed){var n=r.x-e.x,a=r.y-e.y,o=Math.sqrt(n*n+a*a);if(o<(e.r+r.r)*(i.options.collisionRadius+e.momentum*i.options.collisionRadiusIncrease*t)){var s=Math.PI,l=e.r,u=r.r,h=s*(l*l),c=s*(u*u),p=Math.sqrt((h+.8*c)/s);p>i.maxR&&(p=i.maxR),e.r=p,e.momentumX+=.1*n,e.spreadX=0,e.spreadY=0,r.killed=!0,e.momentum=Math.max(r.momentum,Math.min(40,e.momentum+p*i.options.collisionBoostMultiplier+i.options.collisionBoost))}}}),e.momentum-=.1*Math.max(1,.5*this.options.minR-e.momentum)*t,e.momentum<0&&(e.momentum=0),e.momentumX*=Math.pow(.7,t),e.killed||(r.push(e),o&&this.options.dropletsRate>0&&this.clearDroplets(e.x,e.y,e.r*this.options.dropletsCleaningRadiusMultiplier),this.drawDrop(this.ctx,e))}},this),this.drops=r},update:function(){this.clearCanvas();var t=Date.now();null==this.lastRender&&(this.lastRender=t);var e=t-this.lastRender,r=e/(1/60*1e3);r>1.1&&(r=1.1),r*=this.options.globalTimeScale,this.lastRender=t,this.updateDrops(r),requestAnimationFrame(this.update.bind(this))}};var K=Q,Z=r("cffa"),tt={name:"Rain",data:function(){return{textureRainFg:null,textureRainBg:null,textureStormLightningFg:null,textureStormLightningBg:null,textureFalloutFg:null,textureFalloutBg:null,textureSunFg:null,textureSunBg:null,textureDrizzleFg:null,textureDrizzleBg:null,dropColor:null,dropAlpha:null,textureFg:null,textureFgCtx:null,textureBg:null,textureBgCtx:null,textureBgSize:{width:384,height:256},textureFgSize:{width:96,height:64},raindrops:null,renderer:null,canvas:null,parallax:{x:0,y:0},weatherData:null,curWeatherData:null,blend:{v:0}}},methods:{loadTextures:function(){var t=this;Y([{name:"dropAlpha",src:"img/drop-alpha.png"},{name:"dropColor",src:"img/drop-color.png"},{name:"textureRainFg",src:"img/weather/texture-rain-fg.png"},{name:"textureRainBg",src:"img/weather/texture-rain-bg.png"}]).then(function(e){t.textureRainFg=e.textureRainFg.img,t.textureRainBg=e.textureRainBg.img,t.dropColor=e.dropColor.img,t.dropAlpha=e.dropAlpha.img,t.init()})},init:function(){this.canvas=document.querySelector("#container");var t=window.devicePixelRatio;this.canvas.width=window.innerWidth*t,this.canvas.height=window.innerHeight*t,this.canvas.style.width=window.innerWidth+"px",this.canvas.style.height=window.innerHeight+"px",this.raindrops=new K(this.canvas.width,this.canvas.height,t,this.dropAlpha,this.dropColor,{trailRate:1,trailScaleRange:[.2,.45],collisionRadius:.45,dropletsCleaningRadiusMultiplier:.28}),this.textureFg=P(this.textureFgSize.width,this.textureFgSize.height),this.textureFgCtx=this.textureFg.getContext("2d"),this.textureBg=P(this.textureBgSize.width,this.textureBgSize.height),this.textureBgCtx=this.textureBg.getContext("2d"),this.generateTextures(this.textureRainFg,this.textureRainBg),this.renderer=new j(this.canvas,this.raindrops.canvas,this.textureFg,this.textureBg,null,{brightness:1.04,alphaMultiply:6,alphaSubtract:3}),this.setupEvents()},setupEvents:function(){this.setupParallax(),this.setupWeather(),this.setupFlash()},setupParallax:function(){var t=this;document.addEventListener("mousemove",function(e){var r=e.pageX,n=e.pageY;Z["a"].to(t.parallax,1,{x:r/t.canvas.width*2-1,y:n/t.canvas.height*2-1,ease:Quint.easeOut,onUpdate:function(){t.renderer.parallaxX=t.parallax.x,t.renderer.parallaxY=t.parallax.y}})})},setupFlash:function(){var t=this;setInterval(function(){V(t.curWeatherData.flashChance)&&flash(t.curWeatherData.bg,t.curWeatherData.fg,t.curWeatherData.flashBg,t.curWeatherData.flashFg)},500)},setupWeather:function(){var t=this;this.setupWeatherData(),window.addEventListener("hashchange",function(e){t.updateWeather()}),this.updateWeather()},setupWeatherData:function(){var t={raining:!0,minR:20,maxR:50,rainChance:.35,rainLimit:6,dropletsRate:50,dropletsSize:[3,5.5],trailRate:1,trailScaleRange:[.25,.35],fg:this.textureRainFg,bg:this.textureRainBg,flashFg:null,flashBg:null,flashChance:0,collisionRadiusIncrease:2e-4};function e(e){return Object.assign({},t,e)}this.weatherData={rain:e({rainChance:.35,dropletsRate:50,raining:!0,fg:this.textureRainFg,bg:this.textureRainBg})}},updateWeather:function(){var t=this,e=window.location.hash,r=null;""!=e&&(r=document.querySelector(e)),null==r&&(r=document.querySelector(".slide"),e="#"+r.getAttribute("id")),document.querySelector("[href='"+e+"']");var n=this.weatherData[r.getAttribute("data-weather")];this.curWeatherData=n,this.raindrops.options=Object.assign(this.raindrops.options,n),this.raindrops.clearDrops(),Z["a"].fromTo(this.blend,1,{v:0},{v:1,onUpdate:function(){t.generateTextures(n.fg,n.bg,t.blend.v),t.renderer.updateTextures()}})},flash:function(t,e,r,n){var i={v:0};function a(a){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.025;return new Promise(function(l,u){Z["a"].to(i,s,{v:a,ease:Quint.easeOut,onUpdate:function(){o.generateTextures(e,t),o.generateTextures(n,r,i.v),o.renderer.updateTextures()},onComplete:function(){l()}})})}var o=a(1);q(N(2,7),function(t){o=o.then(function(){return a(N(.1,1))})}),o=o.then(function(){return a(1,.1)}).then(function(){a(0,.25)})},generateTextures:function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.textureFgCtx.globalAlpha=r,this.textureFgCtx.drawImage(t,0,0,this.textureFgSize.width,this.textureFgSize.height),this.textureBgCtx.globalAlpha=r,this.textureBgCtx.drawImage(e,0,0,this.textureBgSize.width,this.textureBgSize.height)}},created:function(){this.loadTextures()}},et=tt,rt=Object(f["a"])(et,v,w,!1,null,null,null),nt=rt.exports,it={name:"app",components:{MainView:x,Rain:nt}},at=it,ot=Object(f["a"])(at,s,l,!1,null,null,null),st=ot.exports;i["default"].use(o.a),i["default"].config.productionTip=!1,new i["default"]({render:function(t){return t(st)}}).$mount("#app")}});
//# sourceMappingURL=app.82545383.js.map