(function(t){function e(e){for(var i,o,s=e[0],l=e[1],u=e[2],c=0,d=[];c<s.length;c++)o=s[c],r[o]&&d.push(r[o][0]),r[o]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(d.length)d.shift()();return a.push.apply(a,u||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(a.splice(e--,1),t=o(o.s=n[0]))}return t}var i={},r={app:0},a=[];function o(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=i,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)o.d(n,i,function(e){return t[e]}.bind(null,i));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var s=window["webpackJsonp"]=window["webpackJsonp"]||[],l=s.push.bind(s);s.push=e,s=s.slice();for(var u=0;u<s.length;u++)e(s[u]);var h=l;a.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"56d7":function(t,e,n){"use strict";n.r(e);var i={};n.r(i),n.d(i,"getContext",function(){return b}),n.d(i,"createProgram",function(){return _}),n.d(i,"createShader",function(){return y}),n.d(i,"createTexture",function(){return R}),n.d(i,"createUniform",function(){return C}),n.d(i,"activeTexture",function(){return S}),n.d(i,"updateTexture",function(){return T}),n.d(i,"setRectangle",function(){return D});n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),a=n("ce5b"),o=n.n(a),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-app",{attrs:{dark:""}},[n("v-content",[n("Rain"),n("v-container",{directives:[{name:"scroll",rawName:"v-scroll",value:t.handleScroll,expression:"handleScroll"}],attrs:{fluid:""}},[n("MainView")],1)],1),n("v-fab-transition",[n("v-btn",{directives:[{name:"show",rawName:"v-show",value:!t.hidden,expression:"!hidden"}],attrs:{fab:"",dark:"",small:"",fixed:"",bottom:"",right:"",block:""},on:{click:function(e){return t.$vuetify.goTo(0)}}},[n("v-icon",[t._v("expand_less")])],1)],1)],1)},l=[],u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-card",{staticClass:"blue-grey lighten-3 mx-auto",staticStyle:{margin:"auto"},attrs:{"max-width":"760"}},[n("v-container",{staticClass:"pa-2",attrs:{fluid:"","grid-list-md":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[t._l(t.countdowns,function(e,i){return n("v-flex",{key:i,attrs:{"max-width":"380",xs12:"",sm12:"",md6:"",lg6:""}},[n("v-card",{staticClass:"mx-auto",attrs:{color:"blue-grey darken-2"}},[n("v-card-text",[n("div",{class:e.class},[n("a",{staticClass:"white--text",attrs:{href:e.url,target:"_blank"}},[t._v("\n                "+t._s(e.title)+"\n              ")])]),n("span",[t._v(t._s(e.subtitle))]),1==e.counting?n("countdown",{attrs:{time:e.time,interval:100},on:{end:function(e){return t.handleCountdownEnd(i)}},scopedSlots:t._u([{key:"default",fn:function(e){return[n("ul",{staticClass:"vuejs-countdown"},[n("li",[n("p",{staticClass:"digit"},[t._v(t._s(e.days))]),n("p",{staticClass:"text"},[t._v("days")])]),n("li",[n("p",{staticClass:"digit"},[t._v(t._s(e.hours))]),n("p",{staticClass:"text"},[t._v("hours")])]),n("li",[n("p",{staticClass:"digit"},[t._v(t._s(e.minutes))]),n("p",{staticClass:"text"},[t._v("min")])]),n("li",[n("p",{staticClass:"digit"},[t._v(t._s(e.seconds)+"."+t._s(Math.floor(e.milliseconds/100)))]),n("p",{staticClass:"text"},[t._v("Sec")])])])]}}],null,!0)}):t._e(),0==e.counting?[n("ul",{staticClass:"vuejs-countdown"},[n("li",[n("p",{staticClass:"digit"},[t._v(t._s(e.finishText))]),n("p",{staticClass:"text"},[n("a",{staticClass:"white--text",attrs:{href:e.url,target:"_blank"}},[t._v("\n                      "+t._s(e.finishSubText)+"\n                    ")])])])])]:t._e()],2)],1)],1)}),n("v-flex",[n("v-card",{staticClass:"mx-auto",attrs:{color:"blue-grey darken-2"}},[n("v-expansion-panel",{attrs:{expand:""},model:{value:t.panel,callback:function(e){t.panel=e},expression:"panel"}},[t._l(t.youtube,function(e,i){return n("v-expansion-panel-content",{key:i,staticClass:"blue-grey darken-4",scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[t._v(t._s(e.title))])]},proxy:!0}],null,!0)},[n("iframe",{attrs:{width:"100%",height:"315",src:e.src,frameborder:"0",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",allowfullscreen:""}})])}),t._l(t.twitter,function(e,i){return n("v-expansion-panel-content",{key:i,staticClass:"blue-grey darken-4",scopedSlots:t._u([{key:"header",fn:function(){return[n("div",[t._v(t._s(e.account)+" Tweets")])]},proxy:!0}],null,!0)},[n("v-card",{attrs:{color:"blue-grey darken-3"}},[n("a",{staticClass:"twitter-timeline white--text",attrs:{"data-tweet-limit":"20","data-width":"760","data-theme":"dark","data-link-color":"#F5F8FA","data-chrome":"noheader nofooter noscrollbar transparent",href:t.getTwitterAccountUrl(e.account)}},[n("v-card-text",[t._v("\n                    Tweets by "+t._s(e.account)+"\n                  ")])],1)])],1)})],2)],1)],1)],2)],1)],1)},h=[],c=n("407d"),d=n.n(c),p={name:"MainView",data:function(){var t=new Date,e=new Date(2019,10,8)-t;return{panel:[!0,!0,!1],countdowns:[{title:"Death Stranding",subtitle:"releases in:",class:"headline ds",url:"https://store.playstation.com/en-us/product/UP9000-CUSA11260_00-DEATHSTRAND00001",time:e,finishText:"Today!",finishSubText:"Check it here",counting:!0}],youtube:[{title:"KOJIMA PRODUCTIONS Videos",src:"https://www.youtube.com/embed/+lastest?list=PL4np0lscUMnvSVQYCiGwCWELdmfV2zdlS"}],twitter:[{account:"HIDEO_KOJIMA_EN"},{account:"Kojima_Hideo"}]}},mounted:function(){this.$nextTick(function(){setTimeout(function(){"undefined"!==typeof window.twttr.widgets&&window.twttr.widgets.load()},2e3)})},methods:{getTwitterAccountUrl:function(t){return"https://twitter.com/"+t+"?ref_src=twsrc%5Etfw"},handleCountdownEnd:function(t){this.countdowns[t].counting=!1}},components:{countdown:d.a}},g=p,f=n("2877"),m=Object(f["a"])(g,u,h,!1,null,null,null),x=m.exports,v=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{directives:[{name:"resize",rawName:"v-resize",value:t.onResize,expression:"onResize"}],attrs:{fluid:"",rain:""}},[n("div",{staticStyle:{position:"absolute",top:"0px"}},[n("div",{staticClass:"image-preload",staticStyle:{display:"none"}},[n("img",{attrs:{src:"img/drop-color.png",alt:""}}),n("img",{attrs:{src:"img/drop-alpha.png",alt:""}}),n("img",{attrs:{src:"img/weather/texture-rain-fg.png"}}),n("img",{attrs:{src:"img/weather/texture-rain-bg.png"}})]),n("div",[n("div",{staticClass:"slideshow"},[n("canvas",{staticStyle:{position:"absolute"},attrs:{width:"1",height:"1",id:"container"}}),n("div",{staticClass:"slide",attrs:{id:"slide-1","data-weather":"rain"}})]),n("p",{staticClass:"nosupport"},[t._v("Sorry, but your browser does not support WebGL!")])])])])},w=[];n("7f7f"),n("ac6a"),n("63d9");function b(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=["webgl","experimental-webgl"],i=null;return n.some(function(n){try{i=t.getContext(n,e)}catch(r){i=null}return null!=i}),null==i&&document.body.classList.add("no-webgl"),i}function _(t,e,n){var i=y(t,e,t.VERTEX_SHADER),r=y(t,n,t.FRAGMENT_SHADER),a=t.createProgram();t.attachShader(a,i),t.attachShader(a,r),t.linkProgram(a);var o=t.getProgramParameter(a,t.LINK_STATUS);if(!o){var s=t.getProgramInfoLog(a);return A("Error in program linking: "+s),t.deleteProgram(a),null}var l=t.getAttribLocation(a,"a_position"),u=t.createBuffer();return t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,-1,1,1,-1,1,1]),t.STATIC_DRAW),t.enableVertexAttribArray(l),t.vertexAttribPointer(l,2,t.FLOAT,!1,0,0),a}function y(t,e,n){var i=t.createShader(n);t.shaderSource(i,e),t.compileShader(i);var r=t.getShaderParameter(i,t.COMPILE_STATUS);if(!r){var a=t.getShaderInfoLog(i);return A("Error compiling shader '"+i+"':"+a),t.deleteShader(i),null}return i}function R(t,e,n){var i=t.createTexture();return S(t,n),t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),null==e?i:(T(t,e),i)}function C(t,e,n,i){for(var r=t.getUniformLocation(e,"u_"+i),a=arguments.length,o=new Array(a>4?a-4:0),s=4;s<a;s++)o[s-4]=arguments[s];t["uniform"+n].apply(t,[r].concat(o))}function S(t,e){t.activeTexture(t["TEXTURE"+e])}function T(t,e){t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e)}function D(t,e,n,i,r){var a=e,o=e+i,s=n,l=n+r;t.bufferData(t.ARRAY_BUFFER,new Float32Array([a,s,o,s,a,l,a,l,o,s,o,l]),t.STATIC_DRAW)}function A(t){console.error(t)}function E(t,e,n,i){this.init(t,e,n,i)}E.prototype={canvas:null,gl:null,program:null,width:0,height:0,init:function(t,e,n,i){this.canvas=t,this.width=t.width,this.height=t.height,this.gl=b(t,e),this.program=this.createProgram(n,i),this.useProgram(this.program)},createProgram:function(t,e){var n=_(this.gl,t,e);return n},useProgram:function(t){this.program=t,this.gl.useProgram(t)},createTexture:function(t,e){return R(this.gl,t,e)},createUniform:function(t,e){for(var n=arguments.length,r=new Array(n>2?n-2:0),a=2;a<n;a++)r[a-2]=arguments[a];C.apply(i,[this.gl,this.program,t,e].concat(r))},activeTexture:function(t){S(this.gl,t)},updateTexture:function(t){T(this.gl,t)},viewport:function(t,e){this.gl.viewport(0,0,t,e)},draw:function(){D(this.gl,-1,-1,2,2),this.gl.drawArrays(this.gl.TRIANGLES,0,6)}};var F=E;function P(t,e){var n=document.createElement("canvas");return n.width=t,n.height=e,n}function M(){this.init()}M.prototype={init:function(){},getVertexCode:function(){return"\nprecision mediump float;\n\nattribute vec2 a_position;\n\nvoid main() {\n   gl_Position = vec4(a_position, 0.0, 1.0);\n}\n"},getFragmentCode:function(){return'\nprecision mediump float;\n\n// textures\nuniform sampler2D u_waterMap;\nuniform sampler2D u_textureShine;\nuniform sampler2D u_textureFg;\nuniform sampler2D u_textureBg;\n\n// the texCoords passed in from the vertex shader.\nvarying vec2 v_texCoord;\nuniform vec2 u_resolution;\nuniform vec2 u_parallax;\nuniform float u_parallaxFg;\nuniform float u_parallaxBg;\nuniform float u_textureRatio;\nuniform bool u_renderShine;\nuniform bool u_renderShadow;\nuniform float u_minRefraction;\nuniform float u_refractionDelta;\nuniform float u_brightness;\nuniform float u_alphaMultiply;\nuniform float u_alphaSubtract;\n\n// alpha - blends two colors\nvec4 blend(vec4 bg, vec4 fg) {\n  vec3 bgm = bg.rgb * bg.a;\n  vec3 fgm = fg.rgb * fg.a;\n  float ia = 1.0 - fg.a;\n  float a = (fg.a  +  bg.a  *  ia);\n  vec3 rgb;\n  if(a != 0.0) {\n    rgb = (fgm  +  bgm  *  ia)  /  a;\n  } else {\n    rgb = vec3(0.0, 0.0, 0.0);\n  }\n  return vec4(rgb, a);\n}\n\nvec2 pixel() {\n  return vec2(1.0, 1.0) / u_resolution;\n}\n\nvec2 parallax(float v) {\n  return u_parallax * pixel() * v;\n}\n\nvec2 texCoord() {\n  return vec2(gl_FragCoord.x, u_resolution.y - gl_FragCoord.y) / u_resolution;\n}\n\n// scales the bg up and proportionally to fill the container\nvec2 scaledTexCoord() {\n  float ratio = u_resolution.x / u_resolution.y;\n  vec2 scale = vec2(1.0, 1.0);\n  vec2 offset = vec2(0.0, 0.0);\n  float ratioDelta = ratio - u_textureRatio;\n  if(ratioDelta >= 0.0) {\n    scale.y = (1.0 + ratioDelta);\n    offset.y = ratioDelta / 2.0;\n  } else {\n    scale.x = (1.0 - ratioDelta);\n    offset.x = -ratioDelta / 2.0;\n  }\n  return (texCoord() + offset) / scale;\n}\n\n// get color from fg\nvec4 fgColor(float x, float y) {\n  float p2 = u_parallaxFg * 2.0;\n  vec2 scale = vec2(\n    (u_resolution.x + p2) / u_resolution.x, \n    (u_resolution.y + p2) / u_resolution.y\n  );\n\n  vec2 scaledTexCoord = texCoord() / scale;\n  vec2 offset = vec2(\n    (1.0 - (1.0 / scale.x)) / 2.0, \n    (1.0 - (1.0 / scale.y)) / 2.0\n  );\n\n  return texture2D(u_waterMap, \n    (scaledTexCoord + offset) + (pixel() * vec2(x, y)) + parallax(u_parallaxFg)\n  );\n}\n\nvoid main() {\n  vec4 bg = texture2D(u_textureBg, scaledTexCoord() + parallax(u_parallaxBg));\n\n  vec4 cur = fgColor(0.0, 0.0);\n\n  float d = cur.b; // "thickness"\n  float x = cur.g;\n  float y = cur.r;\n\n  float a = clamp(cur.a * u_alphaMultiply - u_alphaSubtract, 0.0, 1.0);\n\n  vec2 refraction = (vec2(x, y) - 0.5) * 2.0;\n  vec2 refractionParallax = parallax(u_parallaxBg - u_parallaxFg);\n  vec2 refractionPos = scaledTexCoord()\n    + (pixel() * refraction * (u_minRefraction + (d * u_refractionDelta)))\n    + refractionParallax;\n\n  vec4 tex = texture2D(u_textureFg, refractionPos);\n\n  if(u_renderShine) {\n    float maxShine = 490.0;\n    float minShine = maxShine * 0.18;\n    vec2 shinePos = vec2(0.5, 0.5)  +  ((1.0 / 512.0) * refraction) * -(minShine + ((maxShine - minShine) * d));\n    vec4 shine = texture2D(u_textureShine, shinePos);\n    tex = blend(tex, shine);\n  }\n\n  vec4 fg = vec4(tex.rgb * u_brightness, a);\n\n  if(u_renderShadow) {\n    float borderAlpha = fgColor(0., 0. -(d * 6.0)).a;\n    borderAlpha = borderAlpha * u_alphaMultiply - (u_alphaSubtract + 0.5);\n    borderAlpha = clamp(borderAlpha, 0., 1.);\n    borderAlpha *= 0.2;\n    vec4 border = vec4(0., 0., 0., borderAlpha);\n    fg = blend(border, fg);\n  }\n\n  gl_FragColor = blend(bg, fg);\n}\n'}};var B=M,k=new B,U=n("e98f"),O=U(k.getVertexCode()),I=U(k.getFragmentCode()),L={renderShadow:!1,minRefraction:256,maxRefraction:512,brightness:1,alphaMultiply:20,alphaSubtract:5,parallaxBg:5,parallaxFg:20};function z(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.canvas=t,this.canvasLiquid=e,this.imageShine=r,this.imageFg=n,this.imageBg=i,this.options=Object.assign({},L,a),this.init()}z.prototype={canvas:null,gl:null,canvasLiquid:null,width:0,height:0,imageShine:"",imageFg:"",imageBg:"",textures:null,programWater:null,programBlurX:null,programBlurY:null,parallaxX:0,parallaxY:0,renderShadow:!1,options:null,init:function(){this.width=this.canvas.width,this.height=this.canvas.height,this.gl=new F(this.canvas,{alpha:!1},O,I);var t=this.gl;this.programWater=t.program,t.createUniform("2f","resolution",this.width,this.height),t.createUniform("1f","textureRatio",this.imageBg.width/this.imageBg.height),t.createUniform("1i","renderShine",null!=this.imageShine),t.createUniform("1i","renderShadow",this.options.renderShadow),t.createUniform("1f","minRefraction",this.options.minRefraction),t.createUniform("1f","refractionDelta",this.options.maxRefraction-this.options.minRefraction),t.createUniform("1f","brightness",this.options.brightness),t.createUniform("1f","alphaMultiply",this.options.alphaMultiply),t.createUniform("1f","alphaSubtract",this.options.alphaSubtract),t.createUniform("1f","parallaxBg",this.options.parallaxBg),t.createUniform("1f","parallaxFg",this.options.parallaxFg),t.createTexture(null,0),this.textures=[{name:"textureShine",img:null==this.imageShine?P(2,2):this.imageShine},{name:"textureFg",img:this.imageFg},{name:"textureBg",img:this.imageBg}],this.textures.forEach(function(e,n){t.createTexture(e.img,n+1),t.createUniform("1i",e.name,n+1)}),this.render()},render:function(){this.gl.viewport(this.gl.canvas.width,this.gl.canvas.height),this.gl.useProgram(this.programWater),this.gl.createUniform("2f","resolution",this.width,this.height),this.gl.createUniform("2f","parallax",this.parallaxX,this.parallaxY),this.updateTexture(),this.gl.draw(),requestAnimationFrame(this.render.bind(this))},updateTextures:function(){var t=this;this.textures.forEach(function(e,n){t.gl.activeTexture(n+1),t.gl.updateTexture(e.img)})},updateTexture:function(){this.gl.activeTexture(0),this.gl.updateTexture(this.canvasLiquid)},resize:function(){var t=this.canvas.clientWidth,e=this.canvas.clientHeight;this.canvas.width==t&&this.canvas.height==e||(this.width=t,this.height=e,this.canvas.width=t,this.canvas.height=e)},get overlayTexture(){return null},set overlayTexture(t){}};var X=z,W=(n("55dd"),n("75fc"));n("6c7b"),n("5df3");function j(t,e,n){return new Promise(function(i,r){"string"==typeof t&&(t={name:"image"+e,src:t});var a=new Image;t.img=a,a.addEventListener("load",function(r){"function"==typeof n&&n.call(null,a,e),i(t)}),a.src=t.src})}function G(t,e){return Promise.all(t.map(function(t,n){return j(t,n,e)}))}function Y(t,e){return new Promise(function(n,i){G(t,e).then(function(t){var e={};t.forEach(function(t){e[t.name]={img:t.img,src:t.src}}),n(e)})})}function N(t,e){for(var n=0;n<t;n++)e.call(this,n)}function q(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;null==t?(t=0,e=1):null!=t&&null==e&&(e=t,t=0);var i=e-t;return null==n&&(n=function(t){return t}),t+n(Math.random())*i}function V(t){return q()<=t}var H=64,$={x:0,y:0,r:0,spreadX:0,spreadY:0,momentum:0,momentumX:0,lastSpawn:0,nextSpawn:0,parent:null,isNew:!0,killed:!1,shrink:0},J={minR:10,maxR:40,maxDrops:256,rainChance:.3,rainLimit:3,dropletsRate:50,dropletsSize:[2,4],dropletsCleaningRadiusMultiplier:.43,raining:!0,globalTimeScale:1,trailRate:1,autoShrink:!0,spawnArea:[-.1,.95],trailScaleRange:[.2,.5],collisionRadius:.65,collisionRadiusIncrease:.01,dropFallMultiplier:1,collisionBoostMultiplier:.05,collisionBoost:1};function K(t,e,n,i,r){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};this.width=t,this.height=e,this.scale=n,this.dropAlpha=i,this.dropColor=r,this.options=Object.assign({},J,a),this.init()}K.prototype={dropColor:null,dropAlpha:null,canvas:null,ctx:null,width:0,height:0,scale:0,dropletsPixelDensity:1,droplets:null,dropletsCtx:null,dropletsCounter:0,drops:null,dropsGfx:null,clearDropletsGfx:null,textureCleaningIterations:0,lastRender:null,options:null,init:function(){this.canvas=P(this.width,this.height),this.ctx=this.canvas.getContext("2d"),this.droplets=P(this.width*this.dropletsPixelDensity,this.height*this.dropletsPixelDensity),this.dropletsCtx=this.droplets.getContext("2d"),this.drops=[],this.dropsGfx=[],this.renderDropsGfx(),this.update()},get deltaR(){return this.options.maxR-this.options.minR},get area(){return this.width*this.height/this.scale},get areaMultiplier(){return Math.sqrt(this.area/786432)},drawDroplet:function(t,e,n){this.drawDrop(this.dropletsCtx,Object.assign(Object.create($),{x:t*this.dropletsPixelDensity,y:e*this.dropletsPixelDensity,r:n*this.dropletsPixelDensity}))},renderDropsGfx:function(){var t=this,e=P(H,H),n=e.getContext("2d");this.dropsGfx=Array.apply(null,Array(255)).map(function(i,r){var a=P(H,H),o=a.getContext("2d");return n.clearRect(0,0,H,H),n.globalCompositeOperation="source-over",n.drawImage(t.dropColor,0,0,H,H),n.globalCompositeOperation="screen",n.fillStyle="rgba(0,0,"+r+",1)",n.fillRect(0,0,H,H),o.globalCompositeOperation="source-over",o.drawImage(t.dropAlpha,0,0,H,H),o.globalCompositeOperation="source-in",o.drawImage(e,0,0,H,H),a}),this.clearDropletsGfx=P(128,128);var i=this.clearDropletsGfx.getContext("2d");i.fillStyle="#000",i.beginPath(),i.arc(64,64,64,0,2*Math.PI),i.fill()},drawDrop:function(t,e){if(this.dropsGfx.length>0){var n=e.x,i=e.y,r=e.r,a=e.spreadX,o=e.spreadY,s=1,l=1.5,u=Math.max(0,Math.min(1,(r-this.options.minR)/this.deltaR*.9));u*=1/(.5*(e.spreadX+e.spreadY)+1),t.globalAlpha=1,t.globalCompositeOperation="source-over",u=Math.floor(u*(this.dropsGfx.length-1)),t.drawImage(this.dropsGfx[u],(n-r*s*(a+1))*this.scale,(i-r*l*(o+1))*this.scale,2*r*s*(a+1)*this.scale,2*r*l*(o+1)*this.scale)}},clearDroplets:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,i=this.dropletsCtx;i.globalCompositeOperation="destination-out",i.drawImage(this.clearDropletsGfx,(t-n)*this.dropletsPixelDensity*this.scale,(e-n)*this.dropletsPixelDensity*this.scale,2*n*this.dropletsPixelDensity*this.scale,2*n*this.dropletsPixelDensity*this.scale*1.5)},clearCanvas:function(){this.ctx.clearRect(0,0,this.width,this.height)},createDrop:function(t){return this.drops.length>=this.options.maxDrops*this.areaMultiplier?null:Object.assign(Object.create($),t)},addDrop:function(t){return!(this.drops.length>=this.options.maxDrops*this.areaMultiplier||null==t)&&(this.drops.push(t),!0)},updateRain:function(t){var e=[];if(this.options.raining){var n=this.options.rainLimit*t*this.areaMultiplier,i=0;while(V(this.options.rainChance*t*this.areaMultiplier)&&i<n){i++;var r=q(this.options.minR,this.options.maxR,function(t){return Math.pow(t,3)}),a=this.createDrop({x:q(this.width/this.scale),y:q(this.height/this.scale*this.options.spawnArea[0],this.height/this.scale*this.options.spawnArea[1]),r:r,momentum:1+.1*(r-this.options.minR)+q(2),spreadX:1.5,spreadY:1.5});null!=a&&e.push(a)}}return e},clearDrops:function(){this.drops.forEach(function(t){setTimeout(function(){t.shrink=.1+q(.5)},q(1200))}),this.clearTexture()},clearTexture:function(){this.textureCleaningIterations=50},updateDroplets:function(t){var e=this;this.textureCleaningIterations>0&&(this.textureCleaningIterations-=1*t,this.dropletsCtx.globalCompositeOperation="destination-out",this.dropletsCtx.fillStyle="rgba(0,0,0,"+.05*t+")",this.dropletsCtx.fillRect(0,0,this.width*this.dropletsPixelDensity,this.height*this.dropletsPixelDensity)),this.options.raining&&(this.dropletsCounter+=this.options.dropletsRate*t*this.areaMultiplier,N(this.dropletsCounter,function(t){e.dropletsCounter--,e.drawDroplet(q(e.width/e.scale),q(e.height/e.scale),q.apply(void 0,Object(W["a"])(e.options.dropletsSize).concat([function(t){return t*t}])))})),this.ctx.drawImage(this.droplets,0,0,this.width,this.height)},updateDrops:function(t){var e=this,n=[];this.updateDroplets(t);var i=this.updateRain(t);n=n.concat(i),this.drops.sort(function(t,n){var i=t.y*(e.width/e.scale)+t.x,r=n.y*(e.width/e.scale)+n.x;return i>r?1:i==r?0:-1}),this.drops.forEach(function(e,i){var r=this;if(!e.killed){if(V((e.r-this.options.minR*this.options.dropFallMultiplier)*(.1/this.deltaR)*t)&&(e.momentum+=q(e.r/this.options.maxR*4)),this.options.autoShrink&&e.r<=this.options.minR&&V(.05*t)&&(e.shrink+=.01),e.r-=e.shrink*t,e.r<=0&&(e.killed=!0),this.options.raining&&(e.lastSpawn+=e.momentum*t*this.options.trailRate,e.lastSpawn>e.nextSpawn)){var a=this.createDrop({x:e.x+.1*q(-e.r,e.r),y:e.y-.01*e.r,r:e.r*q.apply(void 0,Object(W["a"])(this.options.trailScaleRange)),spreadY:.1*e.momentum,parent:e});null!=a&&(n.push(a),e.r*=Math.pow(.97,t),e.lastSpawn=0,e.nextSpawn=q(this.options.minR,this.options.maxR)-2*e.momentum*this.options.trailRate+(this.options.maxR-e.r))}e.spreadX*=Math.pow(.4,t),e.spreadY*=Math.pow(.7,t);var o=e.momentum>0;o&&!e.killed&&(e.y+=e.momentum*this.options.globalTimeScale,e.x+=e.momentumX*this.options.globalTimeScale,e.y>this.height/this.scale+e.r&&(e.killed=!0));var s=(o||e.isNew)&&!e.killed;e.isNew=!1,s&&this.drops.slice(i+1,i+70).forEach(function(n){if(e!=n&&e.r>n.r&&e.parent!=n&&n.parent!=e&&!n.killed){var i=n.x-e.x,a=n.y-e.y,o=Math.sqrt(i*i+a*a);if(o<(e.r+n.r)*(r.options.collisionRadius+e.momentum*r.options.collisionRadiusIncrease*t)){var s=Math.PI,l=e.r,u=n.r,h=s*(l*l),c=s*(u*u),d=Math.sqrt((h+.8*c)/s);d>r.maxR&&(d=r.maxR),e.r=d,e.momentumX+=.1*i,e.spreadX=0,e.spreadY=0,n.killed=!0,e.momentum=Math.max(n.momentum,Math.min(40,e.momentum+d*r.options.collisionBoostMultiplier+r.options.collisionBoost))}}}),e.momentum-=.1*Math.max(1,.5*this.options.minR-e.momentum)*t,e.momentum<0&&(e.momentum=0),e.momentumX*=Math.pow(.7,t),e.killed||(n.push(e),o&&this.options.dropletsRate>0&&this.clearDroplets(e.x,e.y,e.r*this.options.dropletsCleaningRadiusMultiplier),this.drawDrop(this.ctx,e))}},this),this.drops=n},update:function(){this.clearCanvas();var t=Date.now();null==this.lastRender&&(this.lastRender=t);var e=t-this.lastRender,n=e/(1/60*1e3);n>1.1&&(n=1.1),n*=this.options.globalTimeScale,this.lastRender=t,this.updateDrops(n),requestAnimationFrame(this.update.bind(this))}};var Q=K,Z=n("cffa"),tt={name:"Rain",data:function(){return{textureRainFg:null,textureRainBg:null,textureStormLightningFg:null,textureStormLightningBg:null,textureFalloutFg:null,textureFalloutBg:null,textureSunFg:null,textureSunBg:null,textureDrizzleFg:null,textureDrizzleBg:null,dropColor:null,dropAlpha:null,textureFg:null,textureFgCtx:null,textureBg:null,textureBgCtx:null,textureBgSize:{width:384,height:256},textureFgSize:{width:96,height:64},raindrops:null,renderer:null,canvas:null,parallax:{x:0,y:0},weatherData:null,curWeatherData:null,blend:{v:0},dpi:0}},methods:{loadTextures:function(){var t=this;Y([{name:"dropAlpha",src:"img/drop-alpha.png"},{name:"dropColor",src:"img/drop-color.png"},{name:"textureRainFg",src:"img/weather/texture-rain-fg.png"},{name:"textureRainBg",src:"img/weather/texture-rain-bg.png"}]).then(function(e){t.textureRainFg=e.textureRainFg.img,t.textureRainBg=e.textureRainBg.img,t.dropColor=e.dropColor.img,t.dropAlpha=e.dropAlpha.img,t.init()})},init:function(){this.canvas=document.querySelector("#container"),this.dpi=window.devicePixelRatio;var t=Math.floor(window.innerWidth*this.dpi),e=Math.floor(window.innerHeight*this.dpi);this.canvas.width=t,this.canvas.height=e,this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.raindrops=new Q(this.canvas.width,this.canvas.height,this.dpi,this.dropAlpha,this.dropColor,{trailRate:1,trailScaleRange:[.2,.45],collisionRadius:.45,dropletsCleaningRadiusMultiplier:.28}),this.textureFg=P(this.textureFgSize.width,this.textureFgSize.height),this.textureFgCtx=this.textureFg.getContext("2d"),this.textureBg=P(this.textureBgSize.width,this.textureBgSize.height),this.textureBgCtx=this.textureBg.getContext("2d"),this.generateTextures(this.textureRainFg,this.textureRainBg),this.renderer=new X(this.canvas,this.raindrops.canvas,this.textureFg,this.textureBg,null,{brightness:1.04,alphaMultiply:6,alphaSubtract:3}),this.setupEvents()},setupEvents:function(){this.setupWeather()},setupParallax:function(){var t=this;document.addEventListener("mousemove",function(e){var n=e.pageX,i=e.pageY;Z["a"].to(t.parallax,1,{x:n/t.canvas.width*2-1,y:i/t.canvas.height*2-1,ease:Quint.easeOut,onUpdate:function(){t.renderer.parallaxX=t.parallax.x,t.renderer.parallaxY=t.parallax.y}})})},setupFlash:function(){var t=this;setInterval(function(){V(t.curWeatherData.flashChance)&&flash(t.curWeatherData.bg,t.curWeatherData.fg,t.curWeatherData.flashBg,t.curWeatherData.flashFg)},500)},setupWeather:function(){var t=this;this.setupWeatherData(),window.addEventListener("hashchange",function(e){t.updateWeather()}),this.updateWeather()},setupWeatherData:function(){var t={raining:!0,minR:20,maxR:50,rainChance:.35,rainLimit:6,dropletsRate:30,dropletsSize:[3,5.5],trailRate:1,trailScaleRange:[.25,.35],fg:this.textureRainFg,bg:this.textureRainBg,flashFg:null,flashBg:null,flashChance:0,collisionRadiusIncrease:2e-4};function e(e){return Object.assign({},t,e)}this.weatherData={rain:e({rainChance:.35,dropletsRate:30,raining:!0,fg:this.textureRainFg,bg:this.textureRainBg})}},updateWeather:function(){var t=this,e=window.location.hash,n=null;""!=e&&(n=document.querySelector(e)),null==n&&(n=document.querySelector(".slide"),e="#"+n.getAttribute("id")),document.querySelector("[href='"+e+"']");var i=this.weatherData[n.getAttribute("data-weather")];this.curWeatherData=i,this.raindrops.options=Object.assign(this.raindrops.options,i),this.raindrops.clearDrops(),Z["a"].fromTo(this.blend,1,{v:0},{v:1,onUpdate:function(){t.generateTextures(i.fg,i.bg,t.blend.v),t.renderer.updateTextures()}})},flash:function(t,e,n,i){var r={v:0};function a(a){var o=this,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.025;return new Promise(function(l,u){Z["a"].to(r,s,{v:a,ease:Quint.easeOut,onUpdate:function(){o.generateTextures(e,t),o.generateTextures(i,n,r.v),o.renderer.updateTextures()},onComplete:function(){l()}})})}var o=a(1);N(q(2,7),function(t){o=o.then(function(){return a(q(.1,1))})}),o=o.then(function(){return a(1,.1)}).then(function(){a(0,.25)})},generateTextures:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.textureFgCtx.globalAlpha=n,this.textureFgCtx.drawImage(t,0,0,this.textureFgSize.width,this.textureFgSize.height),this.textureBgCtx.globalAlpha=n,this.textureBgCtx.drawImage(e,0,0,this.textureBgSize.width,this.textureBgSize.height)},onResize:function(){this.resizeCanvas(null)},resizeCanvas:function(t){if(this.canvas&&this.renderer){var e=Math.floor(window.innerWidth*this.dpi),n=Math.floor(window.innerHeight*this.dpi);this.canvas.width===e&&this.canvas.height===n||(this.canvas.width=e,this.canvas.height=n,this.canvas.style.width=e+"px",this.canvas.style.height=n+"px",this.renderer.resize())}}},created:function(){this.loadTextures(),"ondeviceorientationabsolute"in window?window.addEventListener("ondeviceorientationabsolute",this.resizeCanvas,!1):"ondeviceorientation"in window&&window.addEventListener("deviceorientation",this.resizeCanvas,!1)}},et=tt,nt=Object(f["a"])(et,v,w,!1,null,null,null),it=nt.exports,rt={name:"app",data:function(){return{dark:!0,hidden:!0}},methods:{handleScroll:function(t,e){return this.hidden=0==window.scrollY,!this.hidden}},components:{MainView:x,Rain:it}},at=rt,ot=Object(f["a"])(at,s,l,!1,null,null,null),st=ot.exports;r["default"].use(o.a),r["default"].config.productionTip=!1,new r["default"]({render:function(t){return t(st)}}).$mount("#app")}});
//# sourceMappingURL=app.117fb184.js.map